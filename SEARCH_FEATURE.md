# 管脚搜索功能说明

## 新增功能概览

在CviCubeMX工具中添加了管脚搜索功能，用户可以通过输入管脚号来快速定位和高亮显示对应的管脚。

## 功能特性

### 1. 搜索框UI
- 位置：在主界面底部添加了搜索区域
- 包含：搜索标签 + 搜索输入框
- 提示文本：`"输入管脚号 (例如: A2, 15)"`
- 样式：现代化的输入框设计，支持焦点状态高亮

### 2. 搜索功能
- **支持格式**：
  - BGA封装：字母+数字格式（如：A2, B1, L15等）
  - QFN封装：纯数字格式（如：1, 2, 15, 16等）
- **搜索方式**：支持部分匹配和大小写不敏感搜索
- **实时搜索**：输入时即时响应，无需按回车键

### 3. 管脚高亮闪烁
- **闪烁效果**：匹配的管脚会以黑色边框闪烁
- **闪烁频率**：500ms间隔，提供清晰的视觉反馈
- **状态切换**：闪烁时边框在粗细之间切换（4px ↔ 2px）

### 4. 智能取消高亮
- **配置完成自动取消**：当管脚功能从默认的"GPIO"改为其他功能时，自动停止闪烁并清空搜索框
- **手动取消**：清空搜索框内容时取消高亮
- **切换管脚**：搜索新管脚时自动取消之前管脚的高亮

## 技术实现

### 新增文件修改

#### 1. mainwindow.h
- 添加了搜索相关的UI组件声明
- 添加了搜索功能相关的成员变量
- 添加了搜索相关的槽函数声明

#### 2. mainwindow.cpp
- `setupSearchBox()`：创建搜索框UI
- `onSearchTextChanged()`：处理搜索文本变化
- `onBlinkTimeout()`：处理闪烁定时器事件
- `highlightPin()`：管脚高亮控制
- 修改了`onPinFunctionChanged()`：自动取消配置完成管脚的高亮

#### 3. pinwidget.h & pinwidget.cpp
- 添加了高亮状态相关的成员变量和方法
- `setHighlight()`：设置管脚高亮状态
- `isHighlighted()`：获取管脚高亮状态
- 修改了`paintEvent()`：在绘制时根据闪烁状态显示不同的边框效果

## 使用说明

### 基本操作流程
1. 选择芯片型号并点击"开始项目"
2. 在底部搜索框中输入要查找的管脚号
3. 对应管脚将开始黑色边框闪烁
4. 点击闪烁的管脚配置其功能
5. 配置完成后闪烁自动停止，搜索框自动清空

### 搜索示例
- **BGA封装**：输入"A2"会高亮A2位置的管脚
- **QFN封装**：输入"15"会高亮第15号管脚
- **部分匹配**：输入"A"会找到第一个以A开头的管脚

## 注意事项

1. **只对启用的管脚生效**：搜索只会高亮已映射且启用的管脚
2. **单个管脚高亮**：同时只能高亮一个管脚
3. **自动清理**：切换芯片或重新开始项目时会自动清除搜索状态
4. **大小写不敏感**：搜索时不区分大小写

## 未来可能的扩展

1. 支持模糊搜索（如搜索"UART"找到所有UART相关管脚）
2. 支持多管脚同时高亮
3. 添加搜索历史记录
4. 支持按功能类型过滤管脚
